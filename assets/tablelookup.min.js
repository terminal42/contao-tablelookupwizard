var TableLookupWizard=(function(){var f,d,a,e;var c=function(g){if(g.target.checked){g.target.getParent("tr").removeClass("found").inject(d.getElement("tr.search"),"before")}else{g.target.getParent("tr").destroy();d.send(a)}};var b=function(g){g.target.getParent("tr").removeClass("found").inject(e,"before");g.target.getParent("tr").getAllPrevious().destroy();d.send(a)};return function(g){d=document.id(g);e=d.getElement("tr.reset, tr.search");a=window.location.href+"&tableLookupWizard="+g;d.getElement(".jserror").setStyle("display","none");d.getElement(".search").setStyle("display",(((Browser.ie&&Browser.version<8)||(Browser.Engine.trident&&Browser.Engine.version<6))?"block":"table-row"));d.getElements("tbody tr").each(function(i){var h=i.getElement("input[type=checkbox]")||i.getElement("input[type=radio]");if(h){h.addEvent("change",function(j){if(j.target.getParent("tr").hasClass("reset")){j.target.getParent("tr").getAllPrevious().destroy()}else{j.target.getParent("tr").destroy()}d.send(a)})}});d.set("send",{method:"get",link:"cancel",onSuccess:function(j){var i;try{j=JSON.decode(j).content}catch(h){}d.getElements(".search input.tl_text").setStyle("background-image","none");d.getElements("tr.found").destroy();i=Elements.from(j,false);d.getElement("tbody").adopt(i);i.each(function(k){if(k.getElement("input[type=checkbox]")){k.getElement("input[type=checkbox]").addEvent("click",c)}if(k.getElement("input[type=radio]")){k.getElement("input[type=radio]").addEvent("click",b)}})}}).addEvent("keyup",function(){clearTimeout(f);f=setTimeout(function(){d.getElement(".search input.tl_text").setStyle("background-image","url(system/modules/tablelookupwizard/assets/loading.gif)");d.send(a)},300)})}})();